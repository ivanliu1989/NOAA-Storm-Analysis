choose.dir
choose.dir()
setwd(choose.dir())
data.url <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"
data.csv <- "repdata-data-StormData.csv"
if(!(file.exists(data.csv)))
download.file(data.url, destfile="repdata-data-StormData.csv")
library(data.table)
dir()
noaa.data <- fread(data.csv)
noaa.data <- fread("data.csvsa")
?fread
system.time(noaa.data <- read.csv(data.csv,head=T))
str(noaa.data)
head(noaa.data,n=3)
colnames(noaa.data)<-tolower(colnames(noaa.data))
## Subset dataset according to analysis requirement
index.col <- c(1:2,7:8,21:28)
noaa.sub <- subset(noaa.data, select=index.col)
str(noaa.sub)
table(noaa.sub[,10])
table(noaa.sub[,12])
table(noaa.sub[,1])
table(noaa.sub[,2])
table(noaa.sub[,3])
table(noaa.sub[,1])
table(noaa.sub[,4])
str(noaa.sub)
noaa.sub$EVTYPE <- tolower(noaa.sub$EVTYPE)
a <- tolower(noaa.sub$EVTYPE)
a
noaa.sub$EVTYPE
noaa.sub$evtype <- tolower(noaa.sub$evtype)
table(noaa.sub$evtype)
str(noaa.sub)
str(noaa.sub$evtype)
str(as.factor(noaa.sub$evtype))
noaa.sub$evtype <- as.factor(tolower(noaa.sub$evtype))
str(noaa.sub$evtype)
noaa.sub$evtype
table(noaa.sub$evtype)
a <- grepl("Blizzard",noaa.sub$evtype)
table(a)
a <- grepl("blizzard",noaa.sub$evtype)
table(a)
event.types <- read.table(clipboard)
event.types <- read.table("clipboard")
event.types <- read.table("clipboard")
setwd(choose.dir())
data.url <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"
data.csv <- "repdata-data-StormData.csv"
if(!(file.exists(data.csv)))
download.file(data.url, destfile="repdata-data-StormData.csv")
library(data.table)
dir()
system.time(noaa.data <- read.csv(data.csv,head=T))
## Dataset exploration
str(noaa.data)
head(noaa.data,n=3)
colnames(noaa.data)<-tolower(colnames(noaa.data))
## Subset dataset according to analysis requirement
index.col <- c(1:2,7:8,21:28)
noaa.sub <- subset(noaa.data, select=index.col)
str(noaa.sub)
?read.table
event.types <- read.table("evtype", sep"/n")
event.types <- read.table("evtype.txt", sep"/n")
event.types <- read.table("evtype.txt", sep="/n")
event.types <- read.table("evtype.txt", sep="", header=F)
?readLines
event.types <- readLines("evtype.txt")
event.types
noaa.sub$evtype <- as.factor(tolower(noaa.sub$evtype))
noaa.sub$evtype
event.types <- as.factor(tolower(event.types))
str(event.types)
event.types
table(noaa.sub$evtype)
table(event.types)
spec_char <- c(" ","/","(",")","_",",",":",".","\\","&")
spec_char
spec_char <- c(" ","/","(",")","_",",",":",".","\","&")
spec_char
event.types.sub <- gsub(spec_char,"",event.types)
event.types.sub <- sapply(event.types, gsub(spec_char))
?with
?apply
?sapply
?lapply
event.types.sub <- sapply(spec_char, gsub(event.types))
length(spec_char)
number(spec_char)
nrow(spec_char)
ncol(spec_char)
for i in length(spec_char){
event.types.sub <- gsub(spec_char[i],"",event.types)
}
spec_char <- c(" ","/","(",")","_",",",":",".","\\","&")
for i in length(spec_char){
event.types.sub <- gsub(spec_char[i],"",event.types)
for (i in length(spec_char)){
event.types.sub <- gsub(spec_char[i],"",event.types)
}
event.types.sub
event.types
for (i in length(spec_char)){
event.types.sub <- gsub(spec_char[i],"",as.character(event.types))
}
event.types.sub
for (i in length(spec_char)){
event.types.sub <- sub(spec_char[i],"",as.character(event.types))
}
event.types.sub
for (i in length(spec_char)){
spec_char[i]
event.types.sub <- sub(spec_char[i],"",as.character(event.types))
}
for (i in length(spec_char)){
print(spec_char[i])
event.types.sub <- sub(spec_char[i],"",as.character(event.types))
}
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types.sub <- sub(spec_char[i],"",as.character(event.types))
}
spec_char
spec_char <- c(" ","/","\(","\)","_",",",":",".","\\","&")
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types.sub <- sub(spec_char[i],"",as.character(event.types))
}
spec_char <- c(" ","/","_",",",":",".","\\","&")
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types.sub <- sub(spec_char[i],"",as.character(event.types))
}
spec_char <- c(" ","/","_",",",":",".","&")
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types.sub <- sub(spec_char[i],"",as.character(event.types))
}
event.types.sub
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types.sub <- gsub(spec_char[i],"",as.character(event.types))
}
event.types.sub
event.types.sub <- gsub(" ","",as.character(event.types))
event.types.sub
spec_char <- c(" ","/","_",",",":",".","&")
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
}
event.types
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
event.types <- gsub(spec_char[1],"",as.character(event.types))
event.types
event.types <- gsub(spec_char[2],"",as.character(event.types))
event.types
event.types <- gsub(spec_char[3],"",as.character(event.types))
event.types
event.types <- gsub(spec_char[4],"",as.character(event.types))
event.types
event.types <- gsub(spec_char[5],"",as.character(event.types))
event.types
event.types <- gsub(spec_char[6],"",as.character(event.types))
event.types
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype <- as.factor(tolower(noaa.sub$evtype))
spec_char <- c(" ","/","_",",",":","&")
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
}
event.types
spec_char <- c(" ","/","_",",",":","&","-")
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
}
print(spec_char[i])
spec_char
event.types
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype <- gsub(spec_char[i],"",as.character(noaa.sub$evtype))
}
table(noaa.sub$evtype)
setwd(choose.dir())
data.url <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"
data.csv <- "repdata-data-StormData.csv"
if(!(file.exists(data.csv)))
download.file(data.url, destfile="repdata-data-StormData.csv")
library(data.table)
dir()
system.time(noaa.data <- read.csv(data.csv,head=T))
## Dataset exploration
str(noaa.data)
head(noaa.data,n=3)
colnames(noaa.data)<-tolower(colnames(noaa.data))
## Subset dataset according to analysis requirement
index.col <- c(1:2,7:8,21:28)
noaa.sub <- subset(noaa.data, select=index.col)
str(noaa.sub)
## Clean the inconsistencies in EVTYPE column
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype <- as.factor(tolower(noaa.sub$evtype))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype))
?mapply
event.types.sub <- mapply(gsub,spec_char,"",event.types)
event.types.sub <- mapply(gsub,spec_char,rep("",length(spec_char)),event.types)
event.types.sub
rep("",length(spec_char))
a <- rep("",length(spec_char))
a
event.types.sub <- mapply(gsub,spec_char,a,event.types)
event.types.sub
class(a)
class(spec_char)
spec_char[1]
a[1]
a[2]
event.types.sub <- mapply(gsub,spec_char,a,event.types)
class(event.types)
event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
event.types.sub
event.types.sub <- mapply(gsub,a,spec_char,as.character(event.types))
event.types.sub
library(qdap)
install.packages("qdap")
library(qdap)
event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
#noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
event.types
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
event.types
noaa.sub$evtype2
table(noaa.sub$evtype2)
table(noaa.sub$evtype)
table(noaa.sub$evtype2)
str(noaa.sub$evtype2)
table(as.factor(noaa.sub$evtype2))
str(as.factor(noaa.sub$evtype2))
gc()
index <- grepl(pattern=event.types[1],x=noaa.sub$evtype2)
table(index)
index <- grepl(pattern=event.types[2],x=noaa.sub$evtype2)
table(index)
index <- grepl(pattern=event.types[3],x=noaa.sub$evtype2)
index <- grepl(pattern=event.types[3],x=noaa.sub$evtype2)
table(index)
noaa.sub$eventtype[index,] <- event.types[3]
noaa.sub$eventtype[index] <- event.types[3]
table(noaa.sub$eventtype)
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2)
noaa.sub$eventtype[index] <- event.types[i]
}
table(noaa.sub$eventtype)
sum(is.na(noaa.sub$eventtype))
mean(is.na(noaa.sub$eventtype))
gc()
ls()
mean(is.na(noaa.sub$evtype2))
table(noaa.sub$evtype2[is.na(noaa.sub$eventtype)])
table(event.types)
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
mean(is.na(noaa.sub$evtype2))
mean(is.na(noaa.sub$eventtype))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"*",as.character(event.types),)
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
gc()
mean(is.na(noaa.sub$eventtype))
table(noaa.sub$eventtype)
event.types
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"*",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
event.types
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"*",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
mean(is.na(noaa.sub$eventtype))
table(noaa.sub$eventtype)
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
a <- rep("",length(spec_char))
event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i]," ",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
table(noaa.sub$eventtype)
mean(is.na(noaa.sub$eventtype))
table(noaa.sub$evtype2[is.na(noaa.sub$eventtype)])
gc()
check <- matrix(c("cold","Extreme Cold/Wind Chill","tide","Astronomical Low Tide","chill","Cold/Wind Chill"),ncol=2)
check
?matrix
index2 <- grepl(pattern=noaa.sub$evtype2[1],x=noaa.sub$eventtype, fixed=F)
table(index2)
index2 <- grepl(pattern=noaa.sub$evtype2[2],x=noaa.sub$eventtype, fixed=F)
table(index2)
index2 <- grepl(pattern=noaa.sub$evtype2[5],x=noaa.sub$eventtype, fixed=F)
table(index2)
noaa.sub$evtype2[5]
noaa.sub$evtype2[6]
noaa.sub$evtype2
table(noaa.sub$evtype2)[1]
table(noaa.sub$evtype2)[2]
table(noaa.sub$evtype2)[3]
table(noaa.sub$evtype2)[1,3]
unique(noaa.sub$evtype2)[3]
unique(noaa.sub$evtype2)
index2 <- grepl(pattern=unique(noaa.sub$evtype2)[1],x=noaa.sub$eventtype, fixed=F)
table(index2)
index2 <- grepl(pattern=unique(noaa.sub$evtype2)[2],x=noaa.sub$eventtype, fixed=F)
table(index2)
index2 <- grepl(pattern=unique(noaa.sub$evtype2)[3],x=noaa.sub$eventtype, fixed=F)
table(index2)
gc()
