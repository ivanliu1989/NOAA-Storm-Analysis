setwd(choose.dir())
data.url <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"
data.csv <- "repdata-data-StormData.csv"
if(!(file.exists(data.csv)))
download.file(data.url, destfile="repdata-data-StormData.csv")
library(data.table)
dir()
system.time(noaa.data <- read.csv(data.csv,head=T))
## Dataset exploration
str(noaa.data)
head(noaa.data,n=3)
colnames(noaa.data)<-tolower(colnames(noaa.data))
## Subset dataset according to analysis requirement
index.col <- c(1:2,7:8,21:28)
noaa.sub <- subset(noaa.data, select=index.col)
str(noaa.sub)
## Clean the inconsistencies in EVTYPE column
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
a <- rep("",length(spec_char))
event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i]," ",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
## Matching event types based on enventtype
for (i in 1:length(unique(noaa.sub$eventtype)){
for (j in 1:length(noaa.sub$evtype2){
if(grep(noaa.sub$evtype2[j],noaa.sub$eventtype[i]))
noaa.sub$eventtype[j] <- noaa.sub$eventtype[i]
}
}
for (i in 1:length(unique(noaa.sub$eventtype))){
for (j in 1:length(noaa.sub$evtype2){
if(grep(noaa.sub$evtype2[j],noaa.sub$eventtype[i]))
noaa.sub$eventtype[j] <- noaa.sub$eventtype[i]
}
}
for (i in 1:length(unique(noaa.sub$eventtype))){
for (j in 1:length(noaa.sub$evtype2)){
if(grep(noaa.sub$evtype2[j],noaa.sub$eventtype[i]))
noaa.sub$eventtype[j] <- noaa.sub$eventtype[i]
}
}
length(noaa.sub$evtype2
)
for (i in 1:length(unique(noaa.sub$eventtype))){
for (j in 1:length(noaa.sub$evtype2)){
if(grepl(noaa.sub$evtype2[j],unique(noaa.sub$eventtype)[i]))
noaa.sub$eventtype[j] <- unique(noaa.sub$eventtype)[i]
}
}
gc()
str(noaa.sub)
str(noaa.data)
str(noaa.sub)
table(noaa.sub[,7])
noaa.sub$healthdmg <- noaa.sub$fatalities + noaa.sub$injuries
index.col <- c(1:2,7:8,21:28)
noaa.sub <- subset(noaa.data, select=index.col)
str(noaa.sub)
noaa.sub$healthdmg <- noaa.sub$fatalities + noaa.sub$injuries
str(noaa.sub)
table(noaa.sub$cropdmgexp)
table(noaa.sub$propdmgexp)
noaa.sub$propmul[tolower(noaa.sub$cropdmgexp)=="k"]<-1000
table(noaa.sub$propmul)
noaa.sub$cropmul[tolower(noaa.sub$cropdmgexp)=="k"]<-1000
noaa.sub$cropmul[tolower(noaa.sub$cropdmgexp)=="m"]<-1000000
noaa.sub$propmul[tolower(noaa.sub$propdmgexp)=="k"]<-1000
noaa.sub$propmul[tolower(noaa.sub$propdmgexp)=="m"]<-1000000
table(noaa.sub$propmul)
table(noaa.sub$cropmul)
sum(is.na(noaa.sub$cropmul))
noaa.sub$propmul[is.na(noaa.sub$propmul)] <- 1
noaa.sub$cropmul[is.na(noaa.sub$cropmul)] <- 1
table(noaa.sub$cropmul)
table(noaa.sub$propmul)
sum(is.na(noaa.sub$propmul))
sum(is.na(noaa.sub$cropmul))
str(noaa.sub)
noaa.sub$cropdmg <- noaa.sub$cropdmg * noaa.sub$cropmul
noaa.sub$propdmg <- noaa.sub$propdmg * noaa.sub$propmul
sum(noaa.sub$cropdmg)
noaa.sub$ecodmg <- noaa.sub$cropdmg + noaa.sub$propdmg
noaa.sub$cropdmg[noaa.sub$cropdmg==0]
sum(noaa.sub$cropdmg[noaa.sub$cropdmg==0])
str(noaa.sub)
noaa.sub <- noaa.sub[,-c(10,12,14,15)]
str(noaa.sub)
index.col <- c(1:2,7:8,21:28)
noaa.sub <- subset(noaa.data, select=index.col)
str(noaa.sub)
noaa.sub$healthdmg <- noaa.sub$fatalities + noaa.sub$injuries
noaa.sub$cropmul[tolower(noaa.sub$cropdmgexp)=="k"]<-1000
noaa.sub$cropmul[tolower(noaa.sub$cropdmgexp)=="m"]<-1000000
noaa.sub$cropmul[is.na(noaa.sub$cropmul)] <- 1
noaa.sub$propmul[tolower(noaa.sub$propdmgexp)=="k"]<-1000
noaa.sub$propmul[tolower(noaa.sub$propdmgexp)=="m"]<-1000000
noaa.sub$propmul[is.na(noaa.sub$propmul)] <- 1
noaa.sub$cropdmg <- noaa.sub$cropdmg * noaa.sub$cropmul
noaa.sub$propdmg <- noaa.sub$propdmg * noaa.sub$propmul
noaa.sub$ecodmg <- noaa.sub$cropdmg + noaa.sub$propdmg
noaa.sub <- noaa.sub[,-c(1:3,5,6,10,12,14,15)]
str(noaa.sub)
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
a <- rep("",length(spec_char))
event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i]," ",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
## Matching event types based on enventtype
for (i in 1:length(unique(noaa.sub$eventtype))){
for (j in 1:length(noaa.sub$evtype2)){
if(grepl(noaa.sub$evtype2[j],unique(noaa.sub$eventtype)[i]))
noaa.sub$eventtype[j] <- unique(noaa.sub$eventtype)[i]
}
}
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i]," ",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
a <- rep("",length(spec_char))
event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
event.types.sub
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
# a <- rep("",length(spec_char))
# event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i]," ",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
table(noaa.sub$eventtype)
sum(is.na(noaa.sub$eventtype))
mean(is.na(noaa.sub$eventtype))
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
# a <- rep("",length(spec_char))
# event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
mean(is.na(noaa.sub$eventtype))
library(data.table)
noaa.sub <- data.table(noaa.sub)
library(plyr)
?ddly
?ddply
str(noaa.sub)
library(plyr)
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
noaa.agg
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg),evtype2)
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
noaa.sub$eventtype[is.na(noaa.sub$eventtype)] <- oaa.sub$evtype2
noaa.sub$eventtype[is.na(noaa.sub$eventtype)] <- noaa.sub$evtype2
noaa.sub$eventtype[is.na(noaa.sub$eventtype)] <- noaa.sub$evtype2[is.na(noaa.sub$eventtype)]
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
table(noaa.agg[eventtype])
table(noaa.agg$eventtype)
noaa.agg
spec_char <- c(" ","/","_",",",":","&","-",[0-9])
spec_char <- c(" ","/","_",",",":","&","-","[0-9]")
spec_char <- c(" ","/","_",",",":","&","-","[0-9]")
# a <- rep("",length(spec_char))
# event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
## First aggregate to make datasets smaller for the efficiency of following cleansing steps
noaa.sub$eventtype[is.na(noaa.sub$eventtype)] <- noaa.sub$evtype2[is.na(noaa.sub$eventtype)]
library(plyr)
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
noaa.agg
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
# a <- rep("",length(spec_char))
# event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
# a <- rep("",length(spec_char))
# event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
## First aggregate to make datasets smaller for the efficiency of following cleansing steps
noaa.sub$eventtype[is.na(noaa.sub$eventtype)] <- noaa.sub$evtype2[is.na(noaa.sub$eventtype)]
library(plyr)
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
## Matching event types based on enventtype
for (i in 1:length(unique(noaa.sub$eventtype))){
for (j in 1:length(noaa.agg$eventtype)){
if(grepl(noaa.agg$eventtype[j],unique(noaa.sub$eventtype)[i]))
noaa.agg$eventtype[j] <- unique(noaa.sub$eventtype)[i]
}
}
gp()
gc()
gc()
sapply(spec_char,function(x){
event.types <- gsub(x,"",as.character(event.types))
noaa.sub$evtype2 <- gsub(x,"",as.character(noaa.sub$evtype2))
})
?sapply
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
str(noaa.agg)
unique(noaa.sub$eventtype
)
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
# a <- rep("",length(spec_char))
# event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
## First aggregate to make datasets smaller for the efficiency of following cleansing steps
noaa.sub$eventtype[is.na(noaa.sub$eventtype)] <- noaa.sub$evtype2[is.na(noaa.sub$eventtype)]
library(plyr)
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
length(unique(noaa.sub$eventtype))
length(unique(event.types))
grepl(noaa.agg$eventtype[i],unique(event.types)[i])
for (i in 1:length(unique(event.types))){
for (j in 1:length(noaa.agg$eventtype)){
if(grepl(noaa.agg$eventtype[j],unique(event.types)[i]))
noaa.agg$eventtype[j] <- unique(event.types)[i]
}
}
length(unique(noaa.agg$eventtype[j]))
length(unique(noaa.agg$eventtype))
table(noaa.agg$eventtype)
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
## Matching event types based on enventtype
for (i in 1:length(unique(event.types))){
for (j in 1:length(noaa.agg$eventtype)){
if(grepl(noaa.agg$eventtype[j],unique(event.types)[i]))
noaa.agg$eventtype2[j] <- unique(event.types)[i]
}
}
table(noaa.agg$eventtype2)
mean(is.na(noaa.agg$eventtype2))
sum(is.na(noaa.agg$eventtype2))
sum(noaa.agg$eventtype2)
unique(noaa.agg$eventtype2)
sum(unique(noaa.agg$eventtype2))
unique(event.types)
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
noaa.agg
noaa.agg$rawtype[,noaa.agg$eventtype %in% event.types] <- noaa.agg$eventtype[,noaa.agg$eventtype %in% event.types]
noaa.agg$rawtype[,which(noaa.agg$eventtype %in% event.types)] <- noaa.agg$eventtype[,which(noaa.agg$eventtype %in% event.types)]
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
for (i in 1:length(unique(event.types))){
for (j in 1:length(noaa.agg$eventtype)){
if(grepl(noaa.agg$eventtype[j],unique(event.types)[i],fixed=T))
noaa.agg$eventtype2[j] <- unique(event.types)[i]
}
}
unique(noaa.agg$eventtype2)
unique(event.types)
## Across the United States, which types of events (as indicated in the EVTYPE variable) are most harmful with respect to population health (fatalities + injuries)?
## Across the United States, which types of events have the greatest economic consequences (cropdmg + propdmg)?
## Download datasets and load into R
setwd(choose.dir())
data.url <- "https://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2"
data.csv <- "repdata-data-StormData.csv"
if(!(file.exists(data.csv)))
download.file(data.url, destfile="repdata-data-StormData.csv")
library(data.table)
dir()
system.time(noaa.data <- read.csv(data.csv,head=T))
## Dataset exploration
str(noaa.data)
head(noaa.data,n=3)
colnames(noaa.data)<-tolower(colnames(noaa.data))
## Subset dataset according to analysis requirement
# first step subsetting
index.col <- c(1:2,7:8,21:28)
noaa.sub <- subset(noaa.data, select=index.col)
# calculate economic damage and health damage
noaa.sub$healthdmg <- noaa.sub$fatalities + noaa.sub$injuries
noaa.sub$cropmul[tolower(noaa.sub$cropdmgexp)=="k"]<-1000
noaa.sub$cropmul[tolower(noaa.sub$cropdmgexp)=="m"]<-1000000
noaa.sub$cropmul[is.na(noaa.sub$cropmul)] <- 1
noaa.sub$propmul[tolower(noaa.sub$propdmgexp)=="k"]<-1000
noaa.sub$propmul[tolower(noaa.sub$propdmgexp)=="m"]<-1000000
noaa.sub$propmul[is.na(noaa.sub$propmul)] <- 1
noaa.sub$cropdmg <- noaa.sub$cropdmg * noaa.sub$cropmul
noaa.sub$propdmg <- noaa.sub$propdmg * noaa.sub$propmul
noaa.sub$ecodmg <- noaa.sub$cropdmg + noaa.sub$propdmg
# second step subsetting
noaa.sub <- noaa.sub[,-c(1:3,5,6,10,12,14,15)]
## Clean the inconsistencies in EVTYPE column
event.types <- readLines("evtype.txt")
event.types <- as.factor(tolower(event.types))
noaa.sub$evtype2 <- as.factor(tolower(noaa.sub$evtype)) ## create new column for testing
spec_char <- c(" ","/","_",",",":","&","-")
# a <- rep("",length(spec_char))
# event.types.sub <- mapply(gsub,spec_char,a,as.character(event.types))
# library(qdap)
# event.types.sub <- mgsub(spec_char,a,as.character(event.types))
for (i in 1:length(spec_char)){
print(spec_char[i])
event.types <- gsub(spec_char[i],"",as.character(event.types))
noaa.sub$evtype2 <- gsub(spec_char[i],"",as.character(noaa.sub$evtype2))
}
## Matching event types based on event.types
for (i in 1:length(event.types)){
index <- grepl(pattern=event.types[i],x=noaa.sub$evtype2, fixed=F)
noaa.sub$eventtype[index] <- event.types[i]
}
## First aggregate to make datasets smaller for the efficiency of following cleansing steps
noaa.sub$eventtype[is.na(noaa.sub$eventtype)] <- noaa.sub$evtype2[is.na(noaa.sub$eventtype)]
library(plyr)
noaa.agg <- ddply(noaa.sub, .(eventtype), summarize, propdmg=sum(propdmg),cropdmg=sum(cropdmg),
fatalities=sum(fatalities),injuries=sum(injuries),healthdmg=sum(healthdmg),
ecodmg=sum(ecodmg))
noaa.agg
noaa.agg$eventype2 <- noaa.agg$eventype[which(noaa.agg$eventype %in% event.types),]
noaa.agg$eventype2
noaa.agg$eventype %in% event.types
event.types
noaa.agg$eventype
noaa.agg
noaa.agg[,1]
noaa.agg$eventype
noaa.agg$eventtype
noaa.agg$eventtype %in
noaa.agg$eventype2 <- noaa.agg$eventtype[which(noaa.agg$eventtype %in% event.types),]
noaa.agg$eventtype2 <- noaa.agg$eventtype[which(noaa.agg$eventtype %in% event.types),]
noaa.agg$eventtype %in% event.types
noaa.agg$eventtype2 <- noaa.agg$eventtype[noaa.agg$eventtype %in% event.types),]
noaa.agg$eventtype2 <- noaa.agg$eventtype[noaa.agg$eventtype %in% event.types,]
index <- noaa.agg$eventtype %in% event.types
noaa.agg$eventtype2 <- noaa.agg$eventtype[index,]
noaa.agg$eventtype2 <- noaa.agg$eventtype[noaa.agg$eventtype %in% event.types]
noaa.agg$eventtype %in% event.types
index <- noaa.agg$eventtype %in% event.types
noaa.agg$eventtype2 <- noaa.agg$eventtype[index]
noaa.agg$eventtype[index]
z <- noaa.agg$eventtype[index]
z
noaa.agg
